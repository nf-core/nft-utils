{
    "Capture stdout, stderr and both when failure": {
        "content": [
            [
                "N E X T F L O W  ~  version [VERSION]",
                "Launching `[PATH]/tests/filterNextflowOutput/./main.nf` [RUN_NAME] DSL2 - revision: [REVISION]",
                "-----------------------------------------------------",
                "                                        ,--./,-.",
                "        ___     __   __   __   ___     /,-._.--~'",
                "  |\\ | |__  __ /  ` /  \\ |__) |__         }  {",
                "  | \\| |       \\__, \\__/ |  \\ |___     \\`-._,-`-,",
                "                                        `._,._,'",
                "      ____",
                "    .\u00b4 _  `.",
                "   /  |\\`-_ \\      __        __   ___     ",
                "  |   | \\  `-|    |__`  /\\  |__) |__  |__/",
                "   \\ |   \\  /     .__| /\u00af\u00af\\ |  \\ |___ |  \\",
                "    `|____\\\u00b4",
                "------------------------------------------------------",
                "nf-core/pipeline1 [VERSION]",
                "nf-core/pipeline2 [VERSION]",
                "nf-core/pipeline3 [VERSION]",
                "nf-core/pipeline4 [VERSION]",
                "container: [CONTAINER]",
                "image: [CONTAINER]",
                "virtualenv: [CONTAINER]",
                "profile: test[PROFILE][PROFILE][PROFILE]",
                "HOME                      : [PATH]",
                "NFT_WORKDIR               : ~",
                "NXF_CACHE_DIR             : null",
                "NXF_CONDA_CACHEDIR        : null",
                "NXF_HOME                  : [PATH]",
                "NXF_SINGULARITY_CACHEDIR  : [PATH]",
                "NXF_SINGULARITY_LIBRARYDIR: [PATH]",
                "NXF_TEMP                  : null",
                "NXF_WORK                  : null",
                "userName                  : [USER]",
                "outdir                    : results",
                "println message",
                "log.info message",
                "println with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt",
                "log.info with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt",
                "Error with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt",
                " -- Check '[PATH]/.nf-test/tests/[NFT_HASH]/meta/nextflow.log' file for details",
                "ERROR ~ log.error message",
                "ERROR ~ log.error with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt",
                "WARN: log.warn message",
                "WARN: log.warn with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt"
            ],
            [
                "System error with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt",
                "System error message"
            ],
            [
                "N E X T F L O W  ~  version [VERSION]",
                "Launching `[PATH]/tests/filterNextflowOutput/./main.nf` [RUN_NAME] DSL2 - revision: [REVISION]",
                "-----------------------------------------------------",
                "                                        ,--./,-.",
                "        ___     __   __   __   ___     /,-._.--~'",
                "  |\\ | |__  __ /  ` /  \\ |__) |__         }  {",
                "  | \\| |       \\__, \\__/ |  \\ |___     \\`-._,-`-,",
                "                                        `._,._,'",
                "      ____",
                "    .\u00b4 _  `.",
                "   /  |\\`-_ \\      __        __   ___     ",
                "  |   | \\  `-|    |__`  /\\  |__) |__  |__/",
                "   \\ |   \\  /     .__| /\u00af\u00af\\ |  \\ |___ |  \\",
                "    `|____\\\u00b4",
                "------------------------------------------------------",
                "nf-core/pipeline1 [VERSION]",
                "nf-core/pipeline2 [VERSION]",
                "nf-core/pipeline3 [VERSION]",
                "nf-core/pipeline4 [VERSION]",
                "container: [CONTAINER]",
                "image: [CONTAINER]",
                "virtualenv: [CONTAINER]",
                "profile: test[PROFILE][PROFILE][PROFILE]",
                "HOME                      : [PATH]",
                "NFT_WORKDIR               : ~",
                "NXF_CACHE_DIR             : null",
                "NXF_CONDA_CACHEDIR        : null",
                "NXF_HOME                  : [PATH]",
                "NXF_SINGULARITY_CACHEDIR  : [PATH]",
                "NXF_SINGULARITY_LIBRARYDIR: [PATH]",
                "NXF_TEMP                  : null",
                "NXF_WORK                  : null",
                "userName                  : [USER]",
                "outdir                    : results",
                "println message",
                "log.info message",
                "println with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt",
                "log.info with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt",
                "Error with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt",
                "System error with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt",
                "System error message",
                " -- Check '[PATH]/.nf-test/tests/[NFT_HASH]/meta/nextflow.log' file for details",
                "ERROR ~ log.error message",
                "ERROR ~ log.error with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt",
                "WARN: log.warn message",
                "WARN: log.warn with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt"
            ]
        ],
        "meta": {
            "nf-test": "0.9.2",
            "nextflow": "25.04.6"
        },
        "timestamp": "2025-09-04T09:24:58.29509799"
    },
    "Capture both stdout and stderr and keep ANSI codes": {
        "content": [
            [
                "N E X T F L O W  ~  version [VERSION]",
                "Launching `[PATH]/tests/filterNextflowOutput/./main.nf` [RUN_NAME] DSL2 - revision: [REVISION]",
                "\u001b[2m----------------------------------------------------\u001b[0m-",
                "                                        \u001b[0;32m,--.\u001b[0;30m/\u001b[0;32m,-.\u001b[0m",
                "\u001b[0;34m        ___     __   __   __   ___     \u001b[0;32m/,-._.--~'\u001b[0m",
                "\u001b[0;34m  |\\ | |__  __ /  ` /  \\ |__) |__         \u001b[0;33m}  {\u001b[0m",
                "\u001b[0;34m  | \\| |       \\__, \\__/ |  \\ |___     \u001b[0;32m\\`-._,-`-,\u001b[0m",
                "                                        \u001b[0;32m`._,._,'\u001b[0m",
                "\u001b[0;37m      ____\u001b[0m",
                "\u001b[0;37m    .\u00b4 _  `.\u001b[0m",
                "\u001b[0;37m   /  \u001b[0;32m|\\\u001b[0m`-_ \\\u001b[0m     \u001b[0;34m __        __   ___     \u001b[0m",
                "\u001b[0;37m  |   \u001b[0;32m| \\\u001b[0m  `-|\u001b[0m    \u001b[0;34m|__`  /\\  |__) |__  |__/\u001b[0m",
                "\u001b[0;37m   \\ \u001b[0;32m|   \\\u001b[0m  /\u001b[0m     \u001b[0;34m.__| /\u00af\u00af\\ |  \\ |___ |  \\\u001b[0m",
                "\u001b[0;37m    `\u001b[0;32m|\u001b[0m____\u001b[0;32m\\\u001b[0m\u00b4\u001b[0m",
                "-\u001b[2m----------------------------------------------------\u001b[0m-",
                "nf-core/pipeline1 [VERSION]",
                "nf-core/pipeline2 [VERSION]",
                "nf-core/pipeline3 [VERSION]",
                "nf-core/pipeline4 [VERSION]",
                "container: [CONTAINER]",
                "image: [CONTAINER]",
                "virtualenv: [CONTAINER]",
                "profile: test[PROFILE][PROFILE][PROFILE]",
                "HOME                      : [PATH]",
                "NFT_WORKDIR               : ~",
                "NXF_CACHE_DIR             : null",
                "NXF_CONDA_CACHEDIR        : null",
                "NXF_HOME                  : [PATH]",
                "NXF_SINGULARITY_CACHEDIR  : [PATH]",
                "NXF_SINGULARITY_LIBRARYDIR: [PATH]",
                "NXF_TEMP                  : null",
                "NXF_WORK                  : null",
                "userName                  : [USER]",
                "outdir                    : results",
                "println message",
                "\u001b[0;34mlog.info message\u001b[0m",
                "println with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt",
                "\u001b[0;34mlog.info with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt\u001b[0m",
                " -- Check '[PATH]/.nf-test/tests/[NFT_HASH]/meta/nextflow.log' file for details",
                "ERROR ~ \u001b[0;31mlog.error message\u001b[0m",
                "ERROR ~ \u001b[0;31mlog.error with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt\u001b[0m",
                "WARN: \u001b[0;33mlog.warn message\u001b[0m",
                "WARN: \u001b[0;33mlog.warn with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt\u001b[0m",
                "[NXF_HASH] Submitted process > FASTQC (sample_1)",
                "[NXF_HASH] Submitted process > FASTQC (sample_2)",
                "[NXF_HASH] Submitted process > FASTQC (sample_3)"
            ],
            "no stderr",
            [
                "N E X T F L O W  ~  version [VERSION]",
                "Launching `[PATH]/tests/filterNextflowOutput/./main.nf` [RUN_NAME] DSL2 - revision: [REVISION]",
                "\u001b[2m----------------------------------------------------\u001b[0m-",
                "                                        \u001b[0;32m,--.\u001b[0;30m/\u001b[0;32m,-.\u001b[0m",
                "\u001b[0;34m        ___     __   __   __   ___     \u001b[0;32m/,-._.--~'\u001b[0m",
                "\u001b[0;34m  |\\ | |__  __ /  ` /  \\ |__) |__         \u001b[0;33m}  {\u001b[0m",
                "\u001b[0;34m  | \\| |       \\__, \\__/ |  \\ |___     \u001b[0;32m\\`-._,-`-,\u001b[0m",
                "                                        \u001b[0;32m`._,._,'\u001b[0m",
                "\u001b[0;37m      ____\u001b[0m",
                "\u001b[0;37m    .\u00b4 _  `.\u001b[0m",
                "\u001b[0;37m   /  \u001b[0;32m|\\\u001b[0m`-_ \\\u001b[0m     \u001b[0;34m __        __   ___     \u001b[0m",
                "\u001b[0;37m  |   \u001b[0;32m| \\\u001b[0m  `-|\u001b[0m    \u001b[0;34m|__`  /\\  |__) |__  |__/\u001b[0m",
                "\u001b[0;37m   \\ \u001b[0;32m|   \\\u001b[0m  /\u001b[0m     \u001b[0;34m.__| /\u00af\u00af\\ |  \\ |___ |  \\\u001b[0m",
                "\u001b[0;37m    `\u001b[0;32m|\u001b[0m____\u001b[0;32m\\\u001b[0m\u00b4\u001b[0m",
                "-\u001b[2m----------------------------------------------------\u001b[0m-",
                "nf-core/pipeline1 [VERSION]",
                "nf-core/pipeline2 [VERSION]",
                "nf-core/pipeline3 [VERSION]",
                "nf-core/pipeline4 [VERSION]",
                "container: [CONTAINER]",
                "image: [CONTAINER]",
                "virtualenv: [CONTAINER]",
                "profile: test[PROFILE][PROFILE][PROFILE]",
                "HOME                      : [PATH]",
                "NFT_WORKDIR               : ~",
                "NXF_CACHE_DIR             : null",
                "NXF_CONDA_CACHEDIR        : null",
                "NXF_HOME                  : [PATH]",
                "NXF_SINGULARITY_CACHEDIR  : [PATH]",
                "NXF_SINGULARITY_LIBRARYDIR: [PATH]",
                "NXF_TEMP                  : null",
                "NXF_WORK                  : null",
                "userName                  : [USER]",
                "outdir                    : results",
                "println message",
                "\u001b[0;34mlog.info message\u001b[0m",
                "println with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt",
                "\u001b[0;34mlog.info with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt\u001b[0m",
                " -- Check '[PATH]/.nf-test/tests/[NFT_HASH]/meta/nextflow.log' file for details",
                "ERROR ~ \u001b[0;31mlog.error message\u001b[0m",
                "ERROR ~ \u001b[0;31mlog.error with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt\u001b[0m",
                "WARN: \u001b[0;33mlog.warn message\u001b[0m",
                "WARN: \u001b[0;33mlog.warn with path: [PATH]/.nf-test/tests/[NFT_HASH]/results/test.txt\u001b[0m",
                "[NXF_HASH] Submitted process > FASTQC (sample_1)",
                "[NXF_HASH] Submitted process > FASTQC (sample_2)",
                "[NXF_HASH] Submitted process > FASTQC (sample_3)"
            ]
        ],
        "meta": {
            "nf-test": "0.9.2",
            "nextflow": "25.04.6"
        },
        "timestamp": "2025-09-04T09:25:04.675706014"
    }
}
